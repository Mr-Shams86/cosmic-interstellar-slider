/* === База ============================================================= */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap');

:root{
  --nav-h: 68px;
  --slide-step-y: 107%;
  --slide-step-x: 107%;
}

*{ margin:0; padding:0; box-sizing:border-box; font-family:'Montserrat',sans-serif; }

html,body{
  max-width:100%;
  overflow-x:clip;
  background:#000;
  scroll-behavior:smooth;
  padding-right:env(safe-area-inset-right);
  padding-left: env(safe-area-inset-left);
}

[id]{ scroll-margin-top: calc(var(--nav-h) + 16px); }

/* === Hero / Карусель ================================================== */
.carousel{
  position:relative;
  isolation:isolate;
  height:100svh;
  background:#000;
  overflow:hidden;
}

/* Слайды наложены друг на друга: виден только .active */
.carousel > .item{ position:absolute; inset:0; height:100%; opacity:0; pointer-events:none; transition:opacity .45s ease; }
.carousel > .item.active{ opacity:1; pointer-events:auto; }

/* Текстовый блок */
.item .info-box{
  position:absolute; left:5%; top:50%; transform:translateY(-50%);
  width:450px; height:280px; display:flex; align-items:center;
  overflow:hidden; z-index:6;           /* выше звёзд */
}
.info-box .info-slider{ height:inherit; }
.info-slider .info-item{
  height:inherit; display:flex; flex-direction:column; justify-content:center;
  color:#07f1e6;
}
.info-item h2{ font-size:40px; line-height:1; }
.info-item p { font-size:16px; margin:15px 0 20px; }

.info-item .btn{
  position:relative; z-index:7;
  display:inline-flex; justify-content:center; align-items:center;
  width:180px; height:48px; background:transparent;
  border:2px solid #04f2fa; border-radius:40px;
  box-shadow:0 0 10px rgba(0,0,0,.1);
  font-size:16px; color:#53f807; text-decoration:none; font-weight:600;
}
.info-item .btn::before{ content:none !important; }
.info-item .btn:focus-visible{ outline:2px solid #04f2fa; outline-offset:3px; border-radius:999px; }

/* Картинка */
.item .img-box{
  position:absolute; left:40%;
  top: var(--img-top, 54%);
  transform:translateY(-50%);
  width:clamp(560px, 50vw, 820px);
  height:clamp(420px, 62vh, 720px);
  display:flex; align-items:center; overflow:hidden;
  pointer-events:none; z-index:5;       /* под текстом, над звёздами */
}
.img-box .img-slider{ width:inherit; height:inherit; }
.img-slider .img-item{
  width:inherit; height:inherit; display:flex; justify-content:center; align-items:center;
}
.img-item img{
  width:100%; height:100%; object-fit:contain; pointer-events:none;
  filter:drop-shadow(0 0 10px rgba(0,0,0,.2));
  transform:scale(0); transition:transform .5s ease;
}
.item.active .img-item img{ transform:scale(1); }

/* Аватары */
.avatar{
  position:absolute; right:5%; top:50%; transform:translateY(-50%);
  list-style:none; z-index:8;
}
.avatar li{
  width:95px; height:95px; border-radius:50%; cursor:pointer; margin:20px 0; overflow:hidden;
  box-shadow:0 0 10px rgba(3,236,236,.973);
}
.avatar li.selected{ border:3px solid #51f008; }
.avatar li img{ width:100%; height:100%; object-fit:cover; }

/* Фон слайда (под всем) */
.item .bg{
  position:absolute; left:0; top:-1px; width:100%; height:calc(100% + 2px);
  background:#000; opacity:1; z-index:0;
}
.item .bg::before{
  content:''; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:500px; height:500px; background:rgba(255,255,255,.8);
  border-radius:50%; filter:blur(200px);
}

/* Звёзды — над фоном, под контентом, не ловят клики */
#fxStars{
  position:absolute; inset:0;
  z-index:4;
  pointer-events:none;
  opacity:.66;
  mix-blend-mode:screen;
}

/* Лёгкая дымка по краям */
.carousel::after{
  content:""; position:absolute; inset:0; pointer-events:none; z-index:1;
  background:
    radial-gradient(120% 70% at -10% 0%,    rgba(0,255,200,.06), transparent 60%),
    radial-gradient(120% 70% at 110% 0%,    rgba(0,200,255,.05), transparent 60%),
    radial-gradient(120% 70% at 110% 110%,  rgba(255,255,255,.04), transparent 60%),
    radial-gradient(120% 70% at 0% 110%,    rgba(0,255,180,.05), transparent 60%);
  box-shadow: inset 0 0 140px rgba(0,0,0,.65);
}

/* === Modal (как было) ================================================ */
.modal{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  padding:clamp(12px, 4vw, 40px);
  background:radial-gradient(120% 100% at 50% 0, rgba(0,0,0,.66), rgba(0,0,0,.88));
  opacity:0; visibility:hidden; transition:opacity .25s ease, visibility .25s ease; z-index:999;
}
.modal.open{ opacity:1; visibility:visible; }
.modal__backdrop{ position:absolute; inset:0; }
.modal__dialog .credit.small{
  margin-top:10px;
  font-size:12px;
  opacity:.85;
}

.modal__dialog{
  position:relative; width:min(720px,92vw); max-height:80vh; overflow:auto;
  background:rgba(15,17,22,.95); border:1px solid rgba(255,255,255,.06);
  border-radius:20px; box-shadow:0 40px 140px rgba(0,0,0,.6), inset 0 0 120px rgba(0,255,200,.12);
  padding:24px 28px; color:#06dbf7;
}
.modal__close{
  position:absolute; top:10px; right:12px; font-size:28px; line-height:1;
  background:transparent; color:#f30505; border:0; cursor:pointer;
}
.modal__dialog h3{ font-size:clamp(22px,2.2vw,28px); margin:0 0 10px; }
.modal__dialog p, .modal__dialog li{ font-size:15px; line-height:1.6; color:#e2f105; }
.modal__dialog ul{ margin:10px 0 0 18px; }
/* Ссылки внутри модалки (кроме кнопки .modal__link) */
.modal__dialog a:not(.modal__link){
  color:#07d6f1;                   /* яркий бирюзовый */
  text-decoration:underline;
  text-underline-offset:2px;
  text-decoration-thickness:1px;
}
.modal__dialog a:not(.modal__link):visited{
  color:#07d6f1;                   /* убираем фиолетовый visited */
}
.modal__dialog a:not(.modal__link):hover{
  color:#8ff7ff;                   /* подсветка при ховере */
  text-decoration-color:#8ff7ff;
}
.modal__dialog a:not(.modal__link):focus-visible{
  outline:2px solid #07d6f1;       /* видимый фокус */
  outline-offset:2px;
  border-radius:4px;
}

/* мелкая приписка-атрибуция, чтобы ссылки не бледнели */
.modal__dialog .credit.small a{ opacity:1; }

.modal__link{
  display:inline-flex; align-items:center; gap:8px; margin-top:14px; padding:10px 14px;
  border-radius:999px; border:1px solid #07d6f1; text-decoration:none; color:#17f703;
}

/* === Top Nav / Sections / Socials  ============ */
.site-nav{
  position:fixed; left:50%; top:16px; transform:translateX(-50%);
  width:min(1100px, calc(100vw - 32px));
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 16px; border-radius:18px;
  background:rgba(10,10,14,.35); backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,.06); z-index:30;
}
.site-nav .brand{ display:flex; gap:10px; align-items:center; color:#07d9f4; text-decoration:none; }
.site-nav .brand img{ width:28px; height:28px; border-radius:50%; box-shadow:0 0 10px rgba(0,255,200,.35); }
.site-nav .brand span{ font-weight:700; letter-spacing:.2px; }
.site-nav .brand small{ opacity:.7; font-size:12px; }
.site-nav nav{ display:flex; gap:16px; align-items:center; }
.site-nav nav a{ color:#09f50d; text-decoration:none; opacity:.8; }
.site-nav nav a:hover{ opacity:1; }
.site-nav nav a:focus-visible{ outline:2px solid #09f50d; outline-offset:3px; border-radius:10px; }
.site-nav .btn-nav{ padding:8px 14px; border:1px solid rgba(255,255,255,.25); border-radius:999px; }

/* Бургер: фикс на случай длинных текстов/переводов */
.nav-toggle{ line-height:1; overflow:hidden; }
.nav-toggle__bars{ display:block; }


main section{ min-height:50vh; padding:100px 5% 60px; color:#ddd; max-width:1100px; margin:0 auto; }
main h2{ color:#23f414; font-size:28px; margin-bottom:12px; }
main p, main li{ color:#08edf5; opacity:.9; }
main ul{ padding-left:18px; line-height:1.7; }

.socials{
  list-style:none; padding:0; margin:16px auto 0;
  display:flex; align-items:center; justify-content:center; flex-wrap:nowrap; gap:18px; max-width:100%;
}
.socials .social{
  display:grid; place-items:center;
  width:clamp(44px,10vw,52px); height:clamp(44px,10vw,52px);
  border:2px solid #0cfbeb; border-radius:999px; color:#0cfbeb; text-decoration:none;
  transition:transform .2s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease;
}
.socials .social i{ font-size:24px; line-height:1; }
.socials .social:hover, .socials .social:focus-visible{
  transform:translateY(-2px);
  box-shadow:0 0 16px 2px rgba(10,241,218,.35), inset 0 0 14px 2px rgba(10,241,218,.35);
  color:#111; background:#0cfbeb; outline:none;
}

/* Утилита доступности — прячет визуально, но оставляет для скринридеров */
.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}


/* === Адаптив =========================================================== */
@media (max-width:1200px){
  .item .img-box{ left:45%; width:clamp(480px,56vw,720px); height:clamp(360px,60vh,640px); }
  .item .info-box{ width:min(36vw,420px); }
  .avatar{ right:max(6px, env(safe-area-inset-right)); }
  .avatar li{ width:72px; height:72px; margin:14px 0; }
}
@media (max-width:768px){
  .item .img-box{
    left:50%; top:var(--img-top,56%); transform:translate(-50%,-50%);
    width:min(92vw,540px); height:min(60vh,480px);
  }
  .item .info-box{
    left:5vw; top:calc(var(--nav-h) + 14px); transform:none; width:90vw; height:auto;
  }
  .info-item h2{ font-size:clamp(22px, 6vw, 30px); }
  .info-item p { font-size:clamp(13px, 3.6vw, 16px); margin:10px 0 14px; }
  .info-item .btn{ width:clamp(150px, 50vw, 220px); height:44px; font-size:14px; }

  .avatar{ right:max(6px, env(safe-area-inset-right)); transform:translateY(-50%) scale(.78); transform-origin:right center; }
  .avatar li{ width:58px; height:58px; margin:10px 0; }
}
@media (max-width:420px){
  .item .img-box{ width:96vw; height:50vh; }
  .item .info-box{ left:4vw; width:92vw; }
  .avatar{ transform:translateY(-50%) scale(.66); }
  .avatar li{ width:48px; height:48px; margin:8px 0; }
}

/* Бургер */
.nav-toggle{ display:none; }
@media (max-width: 640px){
  :root{ --slide-step-y: 106%; --slide-step-x: 106%; --nav-h: 96px; }
  .nav-toggle{ display:grid; place-items:center; width:42px; height:42px; margin-left:10px;
    border:1px solid rgba(255,255,255,.18); border-radius:12px; background: rgba(10,10,14,.45);
    backdrop-filter: blur(8px); cursor:pointer; z-index:26; }
  .nav-toggle__bars{ position:relative; width:20px; height:2px; background:#c9f7ff; border-radius:2px; }
  .nav-toggle__bars::before,.nav-toggle__bars::after{ content:""; position:absolute; left:0; width:20px; height:2px;
    background:#c9f7ff; border-radius:2px; transition: transform .2s ease, top .2s ease, opacity .2s ease; }
  .nav-toggle__bars::before{ top:-6px; } .nav-toggle__bars::after{ top:6px; }
  /* burger → X when menu is open */
.site-nav.open .nav-toggle{
  border-color: rgba(255,255,255,.28);
  background: rgba(10,10,14,.65);
}

.site-nav.open .nav-toggle__bars{
  background: transparent;            /* прячем среднюю полоску */
}
.site-nav.open .nav-toggle__bars::before{
  top: 0;                              /* сводим к центру */
  transform: rotate(45deg);            /* диагональ ↘ */
}
.site-nav.open .nav-toggle__bars::after{
  top: 0;
  transform: rotate(-45deg);           /* диагональ ↗ */
}


  .site-nav{ padding-block:12px 14px; inset:12px 16px auto 16px; transform:none; width:auto; }
  .site-nav .brand{ display:grid; grid-template-columns:auto 1fr; grid-template-rows:auto auto; column-gap:10px; align-items:center; }
  .site-nav .brand img{ grid-row:1 / span 2; }
  .site-nav .brand span{ display:block; font-size:clamp(13px, 3.6vw, 16px); line-height:1.15; max-width:62vw; }
  .site-nav .brand small{ display:block; margin-top:2px; font-size:clamp(10px, 3vw, 12px); opacity:.75; }

  .site-nav nav{ display:none; }

  .site-nav .nav-menu{
    position:fixed; top:0; left:0; right:0;
    padding: calc(var(--nav-h) + 12px) 20px max(20px, env(safe-area-inset-bottom));
    display:grid; gap:14px;
    background:rgba(10,10,14,.78); backdrop-filter:blur(10px);
    border-bottom:1px solid rgba(28,241,9,.06);
    transform:translateY(-100%); opacity:0; visibility:hidden;
    transition:transform .22s ease, opacity .22s ease, visibility .22s;
    z-index:25; max-height:100dvh; overflow-y:auto;
  }
  .site-nav .nav-menu a{
    display:block; text-align:center; padding:10px 12px; font-size:16px; color:#06f32e; text-decoration:none;
    border:1px solid rgb(7,240,221); border-radius:12px; background:rgba(15,17,22,.55);
  }
  .site-nav .nav-menu a:focus-visible{ outline:2px solid #c9ffbf; outline-offset:3px; border-radius:12px; }

  .nav-scrim{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    opacity:0; visibility:hidden; transition:opacity .2s, visibility .2s;
    z-index:24; pointer-events:none;
  }
  .site-nav.open .nav-menu{ transform:translateY(0); opacity:1; visibility:visible; }
  .site-nav.open .nav-scrim{ opacity:1; visibility:visible; pointer-events:auto; }

  .item .info-box{ top: calc(var(--nav-h) + 12px); transform:none; }
}

@media (max-width: 380px){
  .site-nav .brand span{ display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
  :root{ --nav-h: 104px; }
}

/* запрет прокрутки при открытом меню/модалке */
body.no-scroll{ height:100vh; overflow:hidden; touch-action:none; }

/* Mobile contact icons (компактнее) */
@media (max-width: 640px){
  .socials{ gap: clamp(8px, 3.6vw, 12px); }
  .socials .social{
    width: clamp(36px, 8.5vw, 44px);
    height: clamp(36px, 8.5vw, 44px);
  }
}
/* Совсем узкие (≈320–360px) */
@media (max-width: 360px){
  .socials{ gap:10px; }
  .socials .social{ width:34px; height:34px; }
}

/* === Solar slide (3D) — final ========================================= */
.item.has-3d .img-box{
  /* перекрываем базовую .item .img-box */
  left:20%;
  top:var(--img-top, 54%);
  transform:translateY(-50%);
  width:clamp(720px, 62vw, 1200px);
  height:clamp(420px, 64vh, 760px);
  z-index:2;
  pointer-events:auto; /* можно крутить/зумить модель */
}

/* сам viewer */
.item.has-3d model-viewer.img-3d{
  display:block;
  width:100%; height:100%;
  background:transparent !important;
  --poster-color: transparent;         /* без вспышки постера */
  outline:none;                        /* скрываем дефолтную рамку */
  -webkit-tap-highlight-color:transparent;

  /* появление и лёгкая «сочность» цвета */
  opacity:0;
  transform:scale(.985);
  filter:saturate(1.22) contrast(1.06) brightness(1.04);
  transition:opacity .45s ease, transform .45s ease, filter .2s ease;
}
.item.has-3d.active model-viewer.img-3d{
  opacity:1;
  transform:scale(1);
}

/* фокус только для клавиатуры */
.item.has-3d model-viewer.img-3d:focus{ outline:none; }
.item.has-3d model-viewer.img-3d:focus-visible{
  outline:2px solid rgba(12,251,235,.6);
  outline-offset:6px;
  border-radius:12px;
}

/* планшеты/узкие ноунты — центрируем сильнее */
@media (max-width:1200px){
  .item.has-3d .img-box{
    left:50%;
    transform:translate(-50%, -50%);
  }
}

/* телефоны — крупно, но без выхода за экран */
@media (max-width:768px){
  .item.has-3d .img-box{
    width:min(96vw, 680px);
    height:min(68vh, 560px);
  }
  .item.has-3d model-viewer.img-3d{
    filter:saturate(1.15) contrast(1.04) brightness(1.03);
  }
}

/* если user просит меньше анимации — убираем плавности */
@media (prefers-reduced-motion:reduce){
  .item.has-3d model-viewer.img-3d{ transition:none; }
}
